:root {
  --txt:#0f172a; --muted:#475569;
  --brand:#7aa7ff; --brand2:#a78bfa; --calm:#34d399;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color:var(--txt);
  background:linear-gradient(145deg,#eef2ff 0%, #e0f2fe 45%, #fdf4ff 100%);
  overflow:hidden;
}

/* Soft ribbons background */
canvas.bg{position:fixed; inset:0; z-index:0; pointer-events:none; width: 100%;height: 100%;}

/* App shell */
.shell{
  position:relative; z-index:1; width:min(900px,96vw); height:min(94vh,1100px);
  margin:2.5vh auto; background:rgba(255,255,255,.82); backdrop-filter:blur(14px);
  border-radius:28px; border:1px solid rgba(255,255,255,.55);
  box-shadow:0 24px 60px rgba(4, 12, 28, .16); display:flex; flex-direction:column; overflow:hidden;
}
header{padding:14px; display:flex; justify-content:center; background:rgba(255,255,255,.6); border-bottom:1px solid rgba(15,23,42,.06)}
.badge{padding:6px 14px; border-radius:999px; font-weight:700; letter-spacing:.2px;
  background:linear-gradient(135deg,#93c5fd,#a5b4fc); color:#0b1020; }

main{flex:1; overflow:auto; padding:18px}
.card{background:rgba(255,255,255,.92); border:1px solid rgba(15,23,42,.06); border-radius:20px; padding:16px; margin-bottom:18px}

/* Mindful Flow Zone */
.flow{display:grid; grid-template-columns:160px 1fr; gap:16px; align-items:center}
.orbWrap{position:relative; width:160px; height:160px; display:grid; place-items:center}
.aura{position:absolute; inset:-20px; border-radius:50%; background:radial-gradient(circle at 40% 30%, #a5b4fc55, #93c5fd33, transparent 60%); filter:blur(16px); animation:auraPulse 6s ease-in-out infinite}
@keyframes auraPulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.08)} }
.orb{
  width:120px; height:120px; border-radius:50%;
  background:radial-gradient(circle at 35% 30%, #ffffff, #c7d2fe 55%, #93c5fd 100%);
  box-shadow:0 12px 30px rgba(147,197,253,.45), inset 0 2px 8px rgba(255,255,255,.9);
  animation:breath 12s ease-in-out infinite;
}
@keyframes breath{
  0%{transform:scale(0.94)} 33%{transform:scale(1.06)} 50%{transform:scale(1.08)}
  83%{transform:scale(0.96)} 100%{transform:scale(0.94)}
}
.flowText .title{font-weight:800; font-size:1.15rem}
.flowText .sub{color:var(--muted); font-size:.95rem}
.chips{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap}
.chip{padding:6px 10px; border-radius:999px; font-weight:600; background:linear-gradient(135deg,#e0f2fe,#f1f5f9); border:1px solid #cbd5e1}

/* Chat */
.chat{display:flex; flex-direction:column; height:320px; border-radius:16px; overflow:hidden; border:1px solid rgba(15,23,42,.06)}
.chat-head{padding:10px; font-weight:800; background:rgba(255,255,255,.75)}
.msgs{flex:1; overflow:auto; padding:14px; display:flex; flex-direction:column; gap:10px; background:rgba(241,245,249,.66)}
.msg{max-width:80%; padding:10px 14px; border-radius:14px; font-size:.95rem; line-height:1.35}
.ai{align-self:flex-start; background:#f8fafc; border:1px solid #e2e8f0}
.me{align-self:flex-end; background:linear-gradient(135deg,#93c5fd,#a5b4fc); color:#0b1020; font-weight:600}
.chat-input{display:flex; gap:8px; padding:10px; background:rgba(255,255,255,.8); border-top:1px solid rgba(15,23,42,.06)}
.chat-input input{flex:1; padding:12px 14px; border-radius:14px; border:1px solid #cbd5e1}
.send{width:60px; border-radius:12px; border:none; background:linear-gradient(135deg,var(--brand),var(--brand2)); color:#fff; font-weight:900; cursor:pointer}

/* Relax Zone */
.relax{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px}
#waves{width:100%; height:140px}
.soundLabel{font-weight:800; color:#2563eb}
.tip{font-size:.95rem; color:#475569; text-align:center; min-height:1.4em}

/* Nav + disclaimer */
nav{display:flex; gap:6px; padding:8px; background:rgba(255,255,255,.7); border-top:1px solid rgba(15,23,42,.06)}
.tab{flex:1; text-align:center; padding:10px 8px; border-radius:14px; cursor:pointer; color:var(--muted); font-weight:800}
.tab.active{color:#0f172a; background:linear-gradient(135deg,#93c5fd,#a5b4fc)}
.disclaimer{font-size:.78rem; text-align:center; color:#64748b; padding:6px}

/* Break Overlay */
.overlay{position:fixed; inset:0; background:rgba(4,7,17,.7); display:none; z-index:50; align-items:center; justify-content:center; padding:20px}
.o-card{width:min(520px,92vw); background:#fff; border-radius:22px; padding:22px; text-align:center; box-shadow:0 28px 80px rgba(0,0,0,.35)}
.meter{width:230px; height:230px; margin:16px auto; border-radius:50%;
  background:conic-gradient(var(--brand) var(--p,0%), #e2e8f0 0); display:grid; place-items:center; transition:--p .25s ease }
.meter::before{content:""; width:196px; height:196px; border-radius:50%; background:#fff; border:1px solid #e2e8f0}
.count{font-size:2.1rem; font-weight:900; margin-top:-150px; color:#0f172a}
.o-actions{display:flex; gap:10px; justify-content:center; margin-top:14px}
.btn{padding:12px 16px; border-radius:14px; border:1px solid #cbd5e1; background:#f1f5f9; cursor:pointer; font-weight:900}
.btn.primary{background:linear-gradient(135deg,var(--calm),#bbf7d0); color:#064e3b}
.btn:disabled{opacity:.55; cursor:not-allowed}
